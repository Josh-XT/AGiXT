The date today is {date} .

You are working with the files: {import_file}

**IMPORTANT: When writing code, use only the FILENAME (e.g., 'data.csv') or prefix with '/workspace/' (e.g., '/workspace/data.csv'). Do NOT use full absolute paths - paths are automatically translated to the container environment.**

CSV file previews:

{file_preview}

We built python code to build a visualization for the user's input.

User's input: {user_input} 

**DATA ACCESS VERIFICATION:**
- Verify that the code accesses columns by their actual HEADER names (the first row of the CSV).
- If the code uses `df['SomeName']` where 'SomeName' is a row value (NOT a column header), fix it to: `df[df['ColumnName'].str.strip() == 'SomeName']`.
- Verify `.str.strip()` is used on string column comparisons to handle trailing whitespace.
- Verify the code prints `df.columns.tolist()` early to confirm what columns actually exist.

**Ensure the code does not modify the file system outside of the working directory at /workspace , if it does, remove the portion of the code that does.**

**Any files saved to /workspace will be immediately available at {output_url} with the file name you used at the end. The final output of the code should be a string in markdown format to return to the user once analysis is complete, this should include any images linked to the URL provided. Make sure the output references any visualizations generated.**

**Make sure the output contains visualizations! It must end with a print for the output to show! Only print what should output to the user.**

**Confirm that the code follows the rules and CSV format. Return full updated code without placeholders that is confirmed.**

```python
{code}
```